\begin{quote}
Rewrite a WASM binary \end{quote}
Replace in-\/place an AST node in the binary.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__fcae7481eef301f0d5f997ca04f0db6c_autotoc_md1459}{}\doxysection{Installation}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__fcae7481eef301f0d5f997ca04f0db6c_autotoc_md1459}

\begin{DoxyCode}{0}
\DoxyCodeLine{yarn add @webassemblyjs/wasm-\/edit}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__fcae7481eef301f0d5f997ca04f0db6c_autotoc_md1460}{}\doxysection{Usage}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__fcae7481eef301f0d5f997ca04f0db6c_autotoc_md1460}
Update\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ edit \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const visitors = \{}
\DoxyCodeLine{  ModuleImport(\{ node \}) \{}
\DoxyCodeLine{    node.module = "{}foo"{};}
\DoxyCodeLine{    node.name = "{}bar"{};}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = edit(binary, visitors);}

\end{DoxyCode}


Replace\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ edit \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const visitors = \{}
\DoxyCodeLine{  Instr(path) \{}
\DoxyCodeLine{    const newNode = t.callInstruction(t.indexLiteral(0));}
\DoxyCodeLine{    path.replaceWith(newNode);}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = edit(binary, visitors);}

\end{DoxyCode}


Remove\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ edit \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const visitors = \{}
\DoxyCodeLine{  ModuleExport(\{ node \}) \{}
\DoxyCodeLine{    path.remove()}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = edit(binary, visitors);}

\end{DoxyCode}


Insert\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ add \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = add(actualBinary, [}
\DoxyCodeLine{  t.moduleImport("{}env"{}, "{}mem"{}, t.memory(t.limit(1)))}
\DoxyCodeLine{]);}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__fcae7481eef301f0d5f997ca04f0db6c_autotoc_md1461}{}\doxysection{Providing the AST}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__fcae7481eef301f0d5f997ca04f0db6c_autotoc_md1461}
Providing an AST allows you to handle the decoding yourself, here is the API\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{addWithAST(Program, ArrayBuffer, Array<Node>): ArrayBuffer;}
\DoxyCodeLine{editWithAST(Program, ArrayBuffer, visitors): ArrayBuffer;}

\end{DoxyCode}


Note that the AST will be updated in-\/place. 