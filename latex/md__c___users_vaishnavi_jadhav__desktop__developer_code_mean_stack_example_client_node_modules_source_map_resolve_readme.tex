Resolve the source map and/or sources for a generated file.


\begin{DoxyCode}{0}
\DoxyCodeLine{var sourceMapResolve = require("{}source-\/map-\/resolve"{})}
\DoxyCodeLine{var sourceMap        = require("{}source-\/map"{})}
\DoxyCodeLine{}
\DoxyCodeLine{var code = [}
\DoxyCodeLine{  "{}!function()\{...\}();"{},}
\DoxyCodeLine{  "{}/*\# sourceMappingURL=foo.js.map */"{}}
\DoxyCodeLine{].join("{}\(\backslash\)n"{})}
\DoxyCodeLine{}
\DoxyCodeLine{sourceMapResolve.resolveSourceMap(code, "{}/js/foo.js"{}, fs.readFile, function(error, result) \{}
\DoxyCodeLine{  if (error) \{}
\DoxyCodeLine{    return notifyFailure(error)}
\DoxyCodeLine{  \}}
\DoxyCodeLine{  result}
\DoxyCodeLine{  // \{}
\DoxyCodeLine{  //   map: \{file: "{}foo.js"{}, mappings: "{}..."{}, sources: ["{}/coffee/foo.coffee"{}], names: []\},}
\DoxyCodeLine{  //   url: "{}/js/foo.js.map"{},}
\DoxyCodeLine{  //   sourcesRelativeTo: "{}/js/foo.js.map"{},}
\DoxyCodeLine{  //   sourceMappingURL: "{}foo.js.map"{}}
\DoxyCodeLine{  // \}}
\DoxyCodeLine{}
\DoxyCodeLine{  sourceMapResolve.resolveSources(result.map, result.sourcesRelativeTo, fs.readFile, function(error, result) \{}
\DoxyCodeLine{    if (error) \{}
\DoxyCodeLine{      return notifyFailure(error)}
\DoxyCodeLine{    \}}
\DoxyCodeLine{    result}
\DoxyCodeLine{    // \{}
\DoxyCodeLine{    //   sourcesResolved: ["{}/coffee/foo.coffee"{}],}
\DoxyCodeLine{    //   sourcesContent: ["{}<contents of /coffee/foo.coffee>"{}]}
\DoxyCodeLine{    // \}}
\DoxyCodeLine{  \})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{sourceMapResolve.resolve(code, "{}/js/foo.js"{}, fs.readFile, function(error, result) \{}
\DoxyCodeLine{  if (error) \{}
\DoxyCodeLine{    return notifyFailure(error)}
\DoxyCodeLine{  \}}
\DoxyCodeLine{  result}
\DoxyCodeLine{  // \{}
\DoxyCodeLine{  //   map: \{file: "{}foo.js"{}, mappings: "{}..."{}, sources: ["{}/coffee/foo.coffee"{}], names: []\},}
\DoxyCodeLine{  //   url: "{}/js/foo.js.map"{},}
\DoxyCodeLine{  //   sourcesRelativeTo: "{}/js/foo.js.map"{},}
\DoxyCodeLine{  //   sourceMappingURL: "{}foo.js.map"{},}
\DoxyCodeLine{  //   sourcesResolved: ["{}/coffee/foo.coffee"{}],}
\DoxyCodeLine{  //   sourcesContent: ["{}<contents of /coffee/foo.coffee>"{}]}
\DoxyCodeLine{  // \}}
\DoxyCodeLine{  result.map.sourcesContent = result.sourcesContent}
\DoxyCodeLine{  var map = new sourceMap.sourceMapConsumer(result.map)}
\DoxyCodeLine{  map.sourceContentFor("{}/coffee/foo.coffee"{})}
\DoxyCodeLine{  // "{}<contents of /coffee/foo.coffee>"{}}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13650}{}\doxysection{Installation}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13650}
{\ttfamily npm install source-\/map-\/resolve}\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13651}{}\doxysection{Usage}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13651}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13652}{}\doxysubsubsection{$<$tt$>$source\+Map\+Resolve.\+resolve\+Source\+Map(code, code\+Url, read, callback)$<$/tt$>$}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13652}

\begin{DoxyItemize}
\item {\ttfamily code} is a string of code that may or may not contain a source\+Mapping\+URL comment. Such a comment is used to resolve the source map.
\item {\ttfamily code\+Url} is the url to the file containing {\ttfamily code}. If the source\+Mapping\+URL is relative, it is resolved against {\ttfamily code\+Url}.
\item {\ttfamily read(url, callback)} is a function that reads {\ttfamily url} and responds using {\ttfamily callback(error, content)}. In Node.\+js you might want to use {\ttfamily fs.\+read\+File}, while in the browser you might want to use an asynchronus {\ttfamily XMLHttp\+Request}.
\item {\ttfamily callback(error, result)} is a function that is invoked with either an error or {\ttfamily null} and the result.
\end{DoxyItemize}

The result is an object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily map}\+: The source map for {\ttfamily code}, as an object (not a string).
\item {\ttfamily url}\+: The url to the source map. If the source map came from a data uri, this property is {\ttfamily null}, since then there is no url to it.
\item {\ttfamily sources\+Relative\+To}\+: The url that the sources of the source map are relative to. Since the sources are relative to the source map, and the url to the source map is provided as the {\ttfamily url} property, this property might seem superfluos. However, remember that the {\ttfamily url} property can be {\ttfamily null} if the source map came from a data uri. If so, the sources are relative to the file containing the data uriâ€”{\ttfamily code\+Url}. This property will be identical to the {\ttfamily url} property or {\ttfamily code\+Url}, whichever is appropriate. This way you can conveniently resolve the sources without having to think about where the source map came from.
\item {\ttfamily source\+Mapping\+URL}\+: The url of the source\+Mapping\+URL comment in {\ttfamily code}.
\end{DoxyItemize}

If {\ttfamily code} contains no source\+Mapping\+URL, the result is {\ttfamily null}.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13653}{}\doxysubsubsection{$<$tt$>$source\+Map\+Resolve.\+resolve\+Sources(map, map\+Url, read, \mbox{[}options\mbox{]}, callback)$<$/tt$>$}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13653}

\begin{DoxyItemize}
\item {\ttfamily map} is a source map, as an object (not a string).
\item {\ttfamily map\+Url} is the url to the file containing {\ttfamily map}. Relative sources in the source map, if any, are resolved against {\ttfamily map\+Url}.
\item {\ttfamily read(url, callback)} is a function that reads {\ttfamily url} and responds using {\ttfamily callback(error, content)}. In Node.\+js you might want to use {\ttfamily fs.\+read\+File}, while in the browser you might want to use an asynchronus {\ttfamily XMLHttp\+Request}.
\item {\ttfamily options} is an optional object with any of the following properties\+:
\begin{DoxyItemize}
\item {\ttfamily source\+Root}\+: Override the {\ttfamily source\+Root} property of the source map, which might only be relevant when resolving sources in the browser. This lets you bypass it when using the module outside of a browser, if needed. Pass a string to replace the {\ttfamily source\+Root} property with, or {\ttfamily false} to ignore it. Defaults to {\ttfamily undefined}.
\end{DoxyItemize}
\item {\ttfamily callback(error, result)} is a function that is invoked with either an error or {\ttfamily null} and the result.
\end{DoxyItemize}

The result is an object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily sources\+Resolved}\+: The same as {\ttfamily map.\+sources}, except all the sources are fully resolved.
\item {\ttfamily sources\+Content}\+: An array with the contents of all sources in {\ttfamily map.\+sources}, in the same order as {\ttfamily map.\+sources}. If getting the contents of a source fails, an error object is put into the array instead.
\end{DoxyItemize}\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13654}{}\doxysubsubsection{$<$tt$>$source\+Map\+Resolve.\+resolve(code, code\+Url, read, \mbox{[}options\mbox{]}, callback)$<$/tt$>$}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13654}
The arguments are identical to {\ttfamily source\+Map\+Resolve.\+resolve\+Source\+Map}, except that you may also provide the same {\ttfamily options} as in {\ttfamily source\+Map\+Resolve.\+resolve\+Sources}.

This is a convenience method that first resolves the source map and then its sources. You could also do this by first calling {\ttfamily source\+Map\+Resolve.\+resolve\+Source\+Map} and then {\ttfamily source\+Map\+Resolve.\+resolve\+Sources}.

The result is identical to {\ttfamily source\+Map\+Resolve.\+resolve\+Source\+Map}, with the properties from {\ttfamily source\+Map\+Resolve.\+resolve\+Sources} merged into it.

There is one extra feature available, though. If {\ttfamily code} is {\ttfamily null}, {\ttfamily code\+Url} is treated as a url to the source map instead of to {\ttfamily code}, and will be read. This is handy if you {\itshape sometimes} get the source map url from the {\ttfamily Source\+Map\+: \texorpdfstring{$<$}{<}url\texorpdfstring{$>$}{>}} header (see the Notes section). In this case, the {\ttfamily source\+Mapping\+URL} property of the result is {\ttfamily null}.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13655}{}\doxysubsubsection{$<$tt$>$source\+Map\+Resolve.$\ast$\+Sync()$<$/tt$>$}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13655}
There are also sync versions of the three previous functions. They are identical to the async versions, except\+:


\begin{DoxyItemize}
\item They expect a sync reading function. In Node.\+js you might want to use {\ttfamily fs.\+read\+File\+Sync}, while in the browser you might want to use a synchronus {\ttfamily XMLHttp\+Request}.
\item They throw errors and return the result instead of using a callback.
\end{DoxyItemize}

{\ttfamily source\+Map\+Resolve.\+resolve\+Sources\+Sync} also accepts {\ttfamily null} as the {\ttfamily read} parameter. The result is the same as when passing a function as the {\ttfamily read parameter}, except that the {\ttfamily sources\+Content} property of the result will be an empty array. In other words, the sources arenâ€™t read. You only get the {\ttfamily sources\+Resolved} property. (This only supported in the synchronus version, since there is no point doing it asynchronusly.)\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13656}{}\doxysubsubsection{$<$tt$>$source\+Map\+Resolve.\+parse\+Map\+To\+JSON(string, \mbox{[}data\mbox{]})$<$/tt$>$}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13656}
The spec says that if a source map (as a string) starts with `)\mbox{]}\}'\`{}, it should be stripped off. This is to prevent XSSI attacks. This function does that and returns the result of {\ttfamily JSON.\+parse}ing whatâ€™s left.

If this function throws {\ttfamily error}, {\ttfamily error.\+source\+Map\+Data === data}.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13657}{}\doxysubsubsection{Errors}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13657}
All errors passed to callbacks or thrown by this module have a {\ttfamily source\+Map\+Data} property that contain as much as possible of the intended result of the function up until the error occurred.

Note that while the {\ttfamily map} property of result objects always is an object, {\ttfamily error.\+source\+Map\+Data.\+map} will be a string if parsing that string fails.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13658}{}\doxysection{Note}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13658}
This module resolves the source map for a given generated file by looking for a source\+Mapping\+URL comment. The spec defines yet a way to provide the URL to the source map\+: By sending the {\ttfamily Source\+Map\+: \texorpdfstring{$<$}{<}url\texorpdfstring{$>$}{>}} header along with the generated file. Since this module doesnâ€™t retrive the generated code for you (instead {\itshape you} give the generated code to the module), itâ€™s up to you to look for such a header when you retrieve the file (should the need arise).\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13659}{}\doxysection{License}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_source_map_resolve_readme_autotoc_md13659}
\mbox{[}MIT\mbox{]}(LICENSE). 