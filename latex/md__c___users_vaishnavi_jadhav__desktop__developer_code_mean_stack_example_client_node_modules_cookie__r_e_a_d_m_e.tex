\href{https://npmjs.org/package/cookie}{\texttt{ }} \href{https://npmjs.org/package/cookie}{\texttt{ }} \href{https://nodejs.org/en/download}{\texttt{ }} \href{https://github.com/jshttp/cookie/actions/workflows/ci.yml}{\texttt{ }} \href{https://coveralls.io/r/jshttp/cookie?branch=master}{\texttt{ }}

Basic HTTP cookie parser and serializer for HTTP servers.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3514}{}\doxysection{Installation}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3514}
This is a \href{https://nodejs.org/en/}{\texttt{ Node.\+js}} module available through the \href{https://www.npmjs.com/}{\texttt{ npm registry}}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\texttt{ {\ttfamily npm install} command}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install cookie}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3515}{}\doxysection{API}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3515}

\begin{DoxyCode}{0}
\DoxyCodeLine{var cookie = require('cookie');}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3516}{}\doxysubsection{cookie.\+parse(str, options)}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3516}
Parse an HTTP {\ttfamily Cookie} header string and returning an object of all cookie name-\/value pairs. The {\ttfamily str} argument is the string representing a {\ttfamily Cookie} header value and {\ttfamily options} is an optional object containing additional parsing options.


\begin{DoxyCode}{0}
\DoxyCodeLine{var cookies = cookie.parse('foo=bar; equation=E\%3Dmc\%5E2');}
\DoxyCodeLine{// \{ foo: 'bar', equation: 'E=mc\string^2' \}}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3517}{}\doxysubsubsection{Options}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3517}
{\ttfamily cookie.\+parse} accepts these properties in the options object.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3518}{}\doxyparagraph{decode}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3518}
Specifies a function that will be used to decode a cookie\textquotesingle{}s value. Since the value of a cookie has a limited character set (and must be a simple string), this function can be used to decode a previously-\/encoded cookie value into a Java\+Script string or other object.

The default function is the global {\ttfamily decode\+URIComponent}, which will decode any URL-\/encoded sequences into their byte representations.

{\bfseries{note}} if an error is thrown from this function, the original, non-\/decoded cookie value will be returned as the cookie\textquotesingle{}s value.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3519}{}\doxysubsection{cookie.\+serialize(name, value, options)}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3519}
Serialize a cookie name-\/value pair into a {\ttfamily Set-\/\+Cookie} header string. The {\ttfamily name} argument is the name for the cookie, the {\ttfamily value} argument is the value to set the cookie to, and the {\ttfamily options} argument is an optional object containing additional serialization options.


\begin{DoxyCode}{0}
\DoxyCodeLine{var setCookie = cookie.serialize('foo', 'bar');}
\DoxyCodeLine{// foo=bar}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3520}{}\doxysubsubsection{Options}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3520}
{\ttfamily cookie.\+serialize} accepts these properties in the options object.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3521}{}\doxyparagraph{domain}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3521}
Specifies the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.3}{\texttt{ {\ttfamily Domain} {\ttfamily Set-\/\+Cookie} attribute}}. By default, no domain is set, and most clients will consider the cookie to apply to only the current domain.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3522}{}\doxyparagraph{encode}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3522}
Specifies a function that will be used to encode a cookie\textquotesingle{}s value. Since value of a cookie has a limited character set (and must be a simple string), this function can be used to encode a value into a string suited for a cookie\textquotesingle{}s value.

The default function is the global {\ttfamily encode\+URIComponent}, which will encode a Java\+Script string into UTF-\/8 byte sequences and then URL-\/encode any that fall outside of the cookie range.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3523}{}\doxyparagraph{expires}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3523}
Specifies the {\ttfamily Date} object to be the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.1}{\texttt{ {\ttfamily Expires} {\ttfamily Set-\/\+Cookie} attribute}}. By default, no expiration is set, and most clients will consider this a \char`\"{}non-\/persistent cookie\char`\"{} and will delete it on a condition like exiting a web browser application.

{\bfseries{note}} the \href{https://tools.ietf.org/html/rfc6265\#section-5.3}{\texttt{ cookie storage model specification}} states that if both {\ttfamily expires} and {\ttfamily max\+Age} are set, then {\ttfamily max\+Age} takes precedence, but it is possible not all clients by obey this, so if both are set, they should point to the same date and time.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3524}{}\doxyparagraph{http\+Only}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3524}
Specifies the {\ttfamily boolean} value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.6}{\texttt{ {\ttfamily Http\+Only} {\ttfamily Set-\/\+Cookie} attribute}}. When truthy, the {\ttfamily Http\+Only} attribute is set, otherwise it is not. By default, the {\ttfamily Http\+Only} attribute is not set.

{\bfseries{note}} be careful when setting this to {\ttfamily true}, as compliant clients will not allow client-\/side Java\+Script to see the cookie in {\ttfamily document.\+cookie}.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3525}{}\doxyparagraph{max\+Age}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3525}
Specifies the {\ttfamily number} (in seconds) to be the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.2}{\texttt{ {\ttfamily Max-\/\+Age} {\ttfamily Set-\/\+Cookie} attribute}}. The given number will be converted to an integer by rounding down. By default, no maximum age is set.

{\bfseries{note}} the \href{https://tools.ietf.org/html/rfc6265\#section-5.3}{\texttt{ cookie storage model specification}} states that if both {\ttfamily expires} and {\ttfamily max\+Age} are set, then {\ttfamily max\+Age} takes precedence, but it is possible not all clients by obey this, so if both are set, they should point to the same date and time.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3526}{}\doxyparagraph{path}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3526}
Specifies the value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.4}{\texttt{ {\ttfamily Path} {\ttfamily Set-\/\+Cookie} attribute}}. By default, the path is considered the \href{https://tools.ietf.org/html/rfc6265\#section-5.1.4}{\texttt{ "{}default path"{}}}.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3527}{}\doxyparagraph{same\+Site}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3527}
Specifies the {\ttfamily boolean} or {\ttfamily string} to be the value for the \href{https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03\#section-4.1.2.7}{\texttt{ {\ttfamily Same\+Site} {\ttfamily Set-\/\+Cookie} attribute}}.


\begin{DoxyItemize}
\item {\ttfamily true} will set the {\ttfamily Same\+Site} attribute to {\ttfamily Strict} for strict same site enforcement.
\item {\ttfamily false} will not set the {\ttfamily Same\+Site} attribute.
\item `\textquotesingle{}lax'{\ttfamily will set the}Same\+Site{\ttfamily attribute to}Lax{\ttfamily for lax same site enforcement. -\/}\textquotesingle{}none\textquotesingle{}{\ttfamily will set the}Same\+Site{\ttfamily attribute to}None{\ttfamily for an explicit cross-\/site cookie. -\/}\textquotesingle{}strict\textquotesingle{}{\ttfamily will set the}Same\+Site{\ttfamily attribute to}Strict\`{} for strict same site enforcement.
\end{DoxyItemize}

More information about the different enforcement levels can be found in \href{https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03\#section-4.1.2.7}{\texttt{ the specification}}.

{\bfseries{note}} This is an attribute that has not yet been fully standardized, and may change in the future. This also means many clients may ignore this attribute until they understand it.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3528}{}\doxyparagraph{secure}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3528}
Specifies the {\ttfamily boolean} value for the \href{https://tools.ietf.org/html/rfc6265\#section-5.2.5}{\texttt{ {\ttfamily Secure} {\ttfamily Set-\/\+Cookie} attribute}}. When truthy, the {\ttfamily Secure} attribute is set, otherwise it is not. By default, the {\ttfamily Secure} attribute is not set.

{\bfseries{note}} be careful when setting this to {\ttfamily true}, as compliant clients will not send the cookie back to the server in the future if the browser does not have an HTTPS connection.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3529}{}\doxysection{Example}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3529}
The following example uses this module in conjunction with the Node.\+js core HTTP server to prompt a user for their name and display it back on future visits.


\begin{DoxyCode}{0}
\DoxyCodeLine{var cookie = require('cookie');}
\DoxyCodeLine{var escapeHtml = require('escape-\/html');}
\DoxyCodeLine{var http = require('http');}
\DoxyCodeLine{var url = require('url');}
\DoxyCodeLine{}
\DoxyCodeLine{function onRequest(req, res) \{}
\DoxyCodeLine{  // Parse the query string}
\DoxyCodeLine{  var query = url.parse(req.url, true, true).query;}
\DoxyCodeLine{}
\DoxyCodeLine{  if (query \&\& query.name) \{}
\DoxyCodeLine{    // Set a new cookie with the name}
\DoxyCodeLine{    res.setHeader('Set-\/Cookie', cookie.serialize('name', String(query.name), \{}
\DoxyCodeLine{      httpOnly: true,}
\DoxyCodeLine{      maxAge: 60 * 60 * 24 * 7 // 1 week}
\DoxyCodeLine{    \}));}
\DoxyCodeLine{}
\DoxyCodeLine{    // Redirect back after setting cookie}
\DoxyCodeLine{    res.statusCode = 302;}
\DoxyCodeLine{    res.setHeader('Location', req.headers.referer || '/');}
\DoxyCodeLine{    res.end();}
\DoxyCodeLine{    return;}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  // Parse the cookies on the request}
\DoxyCodeLine{  var cookies = cookie.parse(req.headers.cookie || '');}
\DoxyCodeLine{}
\DoxyCodeLine{  // Get the visitor name set in the cookie}
\DoxyCodeLine{  var name = cookies.name;}
\DoxyCodeLine{}
\DoxyCodeLine{  res.setHeader('Content-\/Type', 'text/html; charset=UTF-\/8');}
\DoxyCodeLine{}
\DoxyCodeLine{  if (name) \{}
\DoxyCodeLine{    res.write('<p>Welcome back, <b>' + escapeHtml(name) + '</b>!</p>');}
\DoxyCodeLine{  \} else \{}
\DoxyCodeLine{    res.write('<p>Hello, new visitor!</p>');}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  res.write('<form method="{}GET"{}>');}
\DoxyCodeLine{  res.write('<input placeholder="{}enter your name"{} name="{}name"{}> <input type="{}submit"{} value="{}Set Name"{}>');}
\DoxyCodeLine{  res.end('</form>');}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{http.createServer(onRequest).listen(3000);}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3530}{}\doxysection{Testing}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3530}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm test}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3531}{}\doxysection{Benchmark}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3531}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm run bench}
\DoxyCodeLine{}
\DoxyCodeLine{> cookie@0.4.1 bench}
\DoxyCodeLine{> node benchmark/index.js}
\DoxyCodeLine{}
\DoxyCodeLine{  node@16.13.1}
\DoxyCodeLine{  v8@9.4.146.24-\/node.14}
\DoxyCodeLine{  uv@1.42.0}
\DoxyCodeLine{  zlib@1.2.11}
\DoxyCodeLine{  brotli@1.0.9}
\DoxyCodeLine{  ares@1.18.1}
\DoxyCodeLine{  modules@93}
\DoxyCodeLine{  nghttp2@1.45.1}
\DoxyCodeLine{  napi@8}
\DoxyCodeLine{  llhttp@6.0.4}
\DoxyCodeLine{  openssl@1.1.1l+quic}
\DoxyCodeLine{  cldr@39.0}
\DoxyCodeLine{  icu@69.1}
\DoxyCodeLine{  tz@2021a}
\DoxyCodeLine{  unicode@13.0}
\DoxyCodeLine{  ngtcp2@0.1.0-\/DEV}
\DoxyCodeLine{  nghttp3@0.1.0-\/DEV}
\DoxyCodeLine{}
\DoxyCodeLine{> node benchmark/parse-\/top.js}
\DoxyCodeLine{}
\DoxyCodeLine{  cookie.parse -\/ top sites}
\DoxyCodeLine{}
\DoxyCodeLine{  15 tests completed.}
\DoxyCodeLine{}
\DoxyCodeLine{  parse accounts.google.com x   504,358 ops/sec ±6.55\% (171 runs sampled)}
\DoxyCodeLine{  parse apple.com           x 1,369,991 ops/sec ±0.84\% (189 runs sampled)}
\DoxyCodeLine{  parse cloudflare.com      x   360,669 ops/sec ±3.75\% (182 runs sampled)}
\DoxyCodeLine{  parse docs.google.com     x   521,496 ops/sec ±4.90\% (180 runs sampled)}
\DoxyCodeLine{  parse drive.google.com    x   553,514 ops/sec ±0.59\% (189 runs sampled)}
\DoxyCodeLine{  parse en.wikipedia.org    x   286,052 ops/sec ±0.62\% (188 runs sampled)}
\DoxyCodeLine{  parse linkedin.com        x   178,817 ops/sec ±0.61\% (192 runs sampled)}
\DoxyCodeLine{  parse maps.google.com     x   284,585 ops/sec ±0.68\% (188 runs sampled)}
\DoxyCodeLine{  parse microsoft.com       x   161,230 ops/sec ±0.56\% (192 runs sampled)}
\DoxyCodeLine{  parse play.google.com     x   352,144 ops/sec ±1.01\% (181 runs sampled)}
\DoxyCodeLine{  parse plus.google.com     x   275,204 ops/sec ±7.78\% (156 runs sampled)}
\DoxyCodeLine{  parse support.google.com  x   339,493 ops/sec ±1.02\% (191 runs sampled)}
\DoxyCodeLine{  parse www.google.com      x   286,110 ops/sec ±0.90\% (191 runs sampled)}
\DoxyCodeLine{  parse youtu.be            x   548,557 ops/sec ±0.60\% (184 runs sampled)}
\DoxyCodeLine{  parse youtube.com         x   545,293 ops/sec ±0.65\% (191 runs sampled)}
\DoxyCodeLine{}
\DoxyCodeLine{> node benchmark/parse.js}
\DoxyCodeLine{}
\DoxyCodeLine{  cookie.parse -\/ generic}
\DoxyCodeLine{}
\DoxyCodeLine{  6 tests completed.}
\DoxyCodeLine{}
\DoxyCodeLine{  simple      x 1,266,646 ops/sec ±0.65\% (191 runs sampled)}
\DoxyCodeLine{  decode      x   838,413 ops/sec ±0.60\% (191 runs sampled)}
\DoxyCodeLine{  unquote     x   877,820 ops/sec ±0.72\% (189 runs sampled)}
\DoxyCodeLine{  duplicates  x   516,680 ops/sec ±0.61\% (191 runs sampled)}
\DoxyCodeLine{  10 cookies  x   156,874 ops/sec ±0.52\% (189 runs sampled)}
\DoxyCodeLine{  100 cookies x    14,663 ops/sec ±0.53\% (191 runs sampled)}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3532}{}\doxysection{References}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3532}

\begin{DoxyItemize}
\item \href{https://tools.ietf.org/html/rfc6265}{\texttt{ RFC 6265\+: HTTP State Management Mechanism}}
\item \href{https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03\#section-4.1.2.7}{\texttt{ Same-\/site Cookies}}
\end{DoxyItemize}\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3533}{}\doxysection{License}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules_cookie__r_e_a_d_m_e_autotoc_md3533}
\mbox{[}MIT\mbox{]}(LICENSE) 