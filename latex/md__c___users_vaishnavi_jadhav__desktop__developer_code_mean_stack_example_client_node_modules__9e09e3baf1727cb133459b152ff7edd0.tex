\begin{quote}
Remap sequential sourcemaps through transformations to point at the original source code \end{quote}
Remapping allows you to take the sourcemaps generated through transforming your code and \char`\"{}remap\char`\"{} them to the original source locations. Think \char`\"{}my minified code, transformed with babel and bundled with webpack\char`\"{}, all pointing to the correct location in your original source code.

With remapping, none of your source code transformations need to be aware of the input\textquotesingle{}s sourcemap, they only need to generate an output sourcemap. This greatly simplifies building custom transformations (think a find-\/and-\/replace).\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md1}{}\doxysection{Installation}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md1}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm install @ampproject/remapping}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md2}{}\doxysection{Usage}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md2}

\begin{DoxyCode}{0}
\DoxyCodeLine{function remapping(}
\DoxyCodeLine{  map: SourceMap | SourceMap[],}
\DoxyCodeLine{  loader: (file: string) => (SourceMap | null | undefined),}
\DoxyCodeLine{  options?: \{ excludeContent: boolean, decodedMappings: boolean \}}
\DoxyCodeLine{): SourceMap;}

\end{DoxyCode}


{\ttfamily remapping} takes the final output sourcemap, and a {\ttfamily loader} function. For every source file pointer in the sourcemap, the {\ttfamily loader} will be called with the resolved path. If the path itself represents a transformed file (it has a sourcmap associated with it), then the {\ttfamily loader} should return that sourcemap. If not, the path will be treated as an original, untransformed source code.


\begin{DoxyCode}{0}
\DoxyCodeLine{// Babel transformed "{}helloworld.js"{} into "{}transformed.js"{}}
\DoxyCodeLine{const transformedMap = JSON.stringify(\{}
\DoxyCodeLine{  file: 'transformed.js',}
\DoxyCodeLine{  // 1st column of 2nd line of output file translates into the 1st source}
\DoxyCodeLine{  // file, line 3, column 2}
\DoxyCodeLine{  mappings: ';CAEE',}
\DoxyCodeLine{  sources: ['helloworld.js'],}
\DoxyCodeLine{  version: 3,}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{// Uglify minified "{}transformed.js"{} into "{}transformed.min.js"{}}
\DoxyCodeLine{const minifiedTransformedMap = JSON.stringify(\{}
\DoxyCodeLine{  file: 'transformed.min.js',}
\DoxyCodeLine{  // 0th column of 1st line of output file translates into the 1st source}
\DoxyCodeLine{  // file, line 2, column 1.}
\DoxyCodeLine{  mappings: 'AACC',}
\DoxyCodeLine{  names: [],}
\DoxyCodeLine{  sources: ['transformed.js'],}
\DoxyCodeLine{  version: 3,}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{const remapped = remapping(}
\DoxyCodeLine{  minifiedTransformedMap,}
\DoxyCodeLine{  (file) => \{}
\DoxyCodeLine{}
\DoxyCodeLine{    // The "{}transformed.js"{} file is an transformed file.}
\DoxyCodeLine{    if (file === 'transformed.js') \{}
\DoxyCodeLine{      return transformedMap;}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    // Loader will be called to load transformedMap's source file pointers as well.}
\DoxyCodeLine{    console.assert(file === 'helloworld.js');}
\DoxyCodeLine{    return null;}
\DoxyCodeLine{  \}}
\DoxyCodeLine{);}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(remapped);}
\DoxyCodeLine{// \{}
\DoxyCodeLine{//   file: 'transpiled.min.js',}
\DoxyCodeLine{//   mappings: 'AAEE',}
\DoxyCodeLine{//   sources: ['helloworld.js'],}
\DoxyCodeLine{//   version: 3,}
\DoxyCodeLine{// \};}

\end{DoxyCode}


In this example, {\ttfamily loader} will be called twice\+:


\begin{DoxyEnumerate}
\item {\ttfamily \char`\"{}transformed.\+js\char`\"{}}, the first source file pointer in the {\ttfamily minified\+Transformed\+Map}. We return the associated sourcemap for it (its a transformed file, after all) so that sourcemap locations can be traced through it into the source files it represents.
\item {\ttfamily \char`\"{}helloworld.\+js\char`\"{}}, our original, unmodified source code. This file does not have a sourcemap, so we return {\ttfamily null}.
\end{DoxyEnumerate}

The {\ttfamily remapped} sourcemap now points from {\ttfamily transformed.\+min.\+js} into locations in {\ttfamily helloworld.\+js}. If you were to read the {\ttfamily mappings}, it says \char`\"{}0th column of the first line output line points to the 1st column of the 2nd line of the file \`{}helloworld.\+js\`{}\char`\"{}.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md3}{}\doxysubsection{Multiple transformations of a file}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md3}
As a convenience, if you have multiple single-\/source transformations of a file, you may pass an array of sourcemap files in the order of most-\/recent transformation sourcemap first. So our above example could have been writen as\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const remapped = remapping(}
\DoxyCodeLine{  [minifiedTransformedMap, transformedMap],}
\DoxyCodeLine{  () => null}
\DoxyCodeLine{);}
\DoxyCodeLine{}
\DoxyCodeLine{console.log(remapped);}
\DoxyCodeLine{// \{}
\DoxyCodeLine{//   file: 'transpiled.min.js',}
\DoxyCodeLine{//   mappings: 'AAEE',}
\DoxyCodeLine{//   sources: ['helloworld.js'],}
\DoxyCodeLine{//   version: 3,}
\DoxyCodeLine{// \};}

\end{DoxyCode}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md4}{}\doxysubsection{Options}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md4}
\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md5}{}\doxysubsubsection{exclude\+Content}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md5}
By default, {\ttfamily exclude\+Content} is {\ttfamily false}. Passing {\ttfamily \{ exclude\+Content\+: true \}} will exclude the {\ttfamily sources\+Content} field from the returned sourcemap. This is mainly useful when you want to reduce the size out the sourcemap.\hypertarget{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md6}{}\doxysubsubsection{decoded\+Mappings}\label{md__c___users_vaishnavi_jadhav__desktop__developer_code_mean_stack_example_client_node_modules__9e09e3baf1727cb133459b152ff7edd0_autotoc_md6}
By default, {\ttfamily decoded\+Mappings} is {\ttfamily false}. Passing {\ttfamily \{ decoded\+Mappings\+: true \}} will leave the {\ttfamily mappings} field in a \href{https://github.com/rich-harris/sourcemap-codec}{\texttt{ decoded state}} instead of encoding into a VLQ string. 